{% extends 'main.html' %}
{% load crispy_forms_tags %}
{% block content %}

<div class="container-md">
    <h1> Edit category '{{ category_name }}' in offer '{{ offer_name }}' </h1>
    <form method="post" class="form">
        {% csrf_token %}
        {{ form|crispy }}
        <button type="submit" class="btn btn-primary">Save changes</button>
    </form>
    <a onclick="location.href='{% url 'delete_category' offer_id category_id %}'" class="btn btn-danger"
        id="addrow">Delete this category</a>
    <table class="table table-hover">
        <thead>
            <tr>
                <th>Unit / Time</th>
                {% for hour in hours %}
                <th>{{ hour|time:"H" }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for unit in units %}
            <tr>
                <td>{{ unit.unit_name }}</td>
                {% for hour in hours %}
                <td>
                    {% for slot in unit.reservation_slots.all %}
                    {% if slot.start_time <= hour and slot.end_time > hour %}
                        Reserved
                        {% endif %}
                        {% endfor %}
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}