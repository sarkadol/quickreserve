{% extends 'main.html' %}
{% load crispy_forms_tags %}
{% load static %}

{% block content %}
<div class="container-md">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <h1 class="text-center">Link</h1>
            <div class="input-group mb-3">
                <input type="text" class="form-control" id="linkToCopy" value="{{ link }}" readonly>
                <div class="input-group-append">
                    <button class="btn btn-outline-secondary" type="button" id="copyButton">Copy</button>
                </div>
            </div>
            <!-- Bootstrap alert, initially hidden -->
            <div class="alert alert-success d-none" id="copyAlert" role="alert">
                Link copied to clipboard!
            </div>
             <!-- Space between buttons -->
             <div class="mb-3"></div>
             <!-- Center-align the Optimize button -->
             <div class="d-flex justify-content-center">
                 <!-- New Optimize Button, larger size -->
                 <a href="{% url 'optimize' %}" class="btn btn-primary btn-lg" type="button" id="optimizeButton">Optimize</a>
             </div>
        </div>
    </div>
</div>

<script>
document.getElementById("copyButton").onclick = function() {
    var copyText = document.getElementById("linkToCopy");
    var copyAlert = document.getElementById("copyAlert");
    
    // Copy text
    copyText.select();
    copyText.setSelectionRange(0, 99999); // For mobile devices
    navigator.clipboard.writeText(copyText.value).then(function() {
        // Show success message
        copyAlert.classList.remove("d-none");
        // Hide the alert after a few seconds
        setTimeout(function() {
            copyAlert.classList.add("d-none");
        }, 3000); // 3000ms = 3 seconds
    }, function(err) {
        console.error('Could not copy text: ', err);
    });
}
</script>
{% endblock %}
