{% load crispy_forms_tags %}
{% block content %}
{% load static %}

<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible' content=" IE=edge">
    <title>Quickreserve</title>
    <meta name="viewport" content='width=device-width, initial-scale=1'>
    <!-- First include Popper.js for dropdowns-->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <!-- Then include Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

    <!--bootstrap-->
    <script scr="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
    <!--bootstrap-->

</head>

<div class="container-md">
    <h1>New reservation for '{{ category_name }}'</h1>
    
    <!-- Combined Date Input and Navigation Component -->
    <div class="d-flex align-items-center justify-content-center my-3">
        <button id="prevDay" class="btn btn-outline-secondary">&#60;</button> <!-- Left arrow for previous day -->
        <form method="get" action="" id="date-form" class="d-flex">
            <input type="date" id="dateInput" name="selected_date" required class="form-control mx-2">
            <!--<button type="submit" class="btn btn-primary" >Show Availability</button>-->
        </form>
        <button id="nextDay" class="btn btn-outline-secondary">&#62;</button> <!-- Right arrow for next day -->
    </div>

    <!--<div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
        <label class="form-check-label" for="flexCheckDefault">
            Reservation for more days
        </label>
    </div>-->
    <p>
        Resevation can be made only 1 day in advance.
        To select reservation time, click in the table twice: from-to.
    </p>
    <script src="{% static 'js/date_based_reservation.js' %}"></script>
    <div id="reservation-table">
        <!-- Dynamic content from reservations_table.html will be loaded here -->
    </div>
    <div id="selection-info" class="alert alert-info" role="alert" style="display: none;">
        <strong>Selected Reservation:</strong>
        <span id="selected-date-info"></span>,
        <span id="start-time-info"></span> to
        <span id="end-time-info"></span> 
    </div>

    <div class="reservation-legend mt-3">
        <h5>Legend:</h5>
        <ul class="list-inline">
            <li class="list-inline-item"><span class="legend-box" style="background-color: #ffffff;"></span> * = Available slots</li>
            <li class="list-inline-item"><span class="legend-box" style="background-color: #ccffcc;"></span> * = Chosen slots</li>
            <li class="list-inline-item "><span class="legend-box bg-danger" ></span> R = Reserved</li>
            <li class="list-inline-item"><span class="legend-box" style="background-color: orange;"></span> C = Closed</li>
            <li class="list-inline-item"><span class="legend-box" style="background-color: yellow"></span> P = Pending Reservation</li>
        </ul>
    </div>

    <button id="nextButton" class="btn btn-primary" disabled>Next</button> <!-- The Next button, initially disabled -->

</div>

{% endblock %}
<!-- Additional CSS for legend -->
<style>
    .legend-box {
        display: inline-block;
        width: 20px;
        height: 20px;
        margin-right: 5px;
        border: 1px solid #000;
    }
</style>